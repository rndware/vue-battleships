import{_ as c,c as u,o as i,r as V,d as m,a as h,w as A,n as N,b as S,t as k,e as F,f as b,F as B,g as G,h as R,i as Q,j as w,k as T,s as X,u as v}from"./index-B040LpMc.js";const x={maxShots:50,grid:{rows:10,cols:10},ships:[{name:"Battleship",size:5},{name:"Destroyer",size:4}],cellEmoji:{sunk:"🔥",hit:"💥",miss:"💦"},gameEmoji:{win:"🏆 ",lose:"💀",hit:"🎯 "}},f={data:x},{rows:J,cols:P}=f.data.grid,W=(a,e)=>a>=0&&a<J&&e>=0&&e<P,Z=a=>{const e=a.toUpperCase().match(/^([A-Z])(\d{1,2})$/);if(!e)return null;const s=e[1].charCodeAt(0)-65,n=parseInt(e[2],10)-1;return W(n,s)?{row:n,col:s}:null},ee=(a,e,s,n,t)=>{if(n&&e+s>P||!n&&a+s>J)return!1;for(let o=0;o<s;o++){const l=n?a:a+o,r=n?e+o:e;for(let _=-1;_<=1;_++)for(let $=-1;$<=1;$++){const C=l+_,I=r+$;if(W(C,I)&&t[C][I].ship!==null)return!1}}return!0},se=a=>!a.hit&&!a.miss&&!a.sunk,te=(a,e)=>{const s=Z(a);return s?se(e[s.row][s.col]):!1},ae={},ne={class:"info-label"};function oe(a,e){return i(),u("span",ne,[V(a.$slots,"default",{},void 0,!0)])}const ie=c(ae,[["render",oe],["__scopeId","data-v-f075c718"]]),le={},re={class:"info-value"};function ue(a,e){return i(),u("span",re,[V(a.$slots,"default",{},void 0,!0)])}const de=c(le,[["render",ue],["__scopeId","data-v-cfb17ec2"]]),ce={class:"info-item"},me=m({__name:"InfoItem",props:{label:{},value:{},warning:{type:Boolean}},setup(a){return(e,s)=>(i(),u("div",ce,[h(ie,null,{default:A(()=>[S(k(e.label),1)]),_:1}),h(de,{class:N({warning:e.warning})},{default:A(()=>[S(k(e.value),1)]),_:1},8,["class"])]))}}),j=c(me,[["__scopeId","data-v-1d452693"]]),pe={class:"game-info"},he=m({__name:"GameInfo",props:{shotsFired:{},hits:{},shotsRemaining:{},shipsRemaining:{}},setup(a){return(e,s)=>(i(),u("section",pe,[h(j,{label:"Shots Fired",value:e.shotsFired},null,8,["value"]),h(j,{label:"Hits",value:e.hits},null,8,["value"]),h(j,{label:"Shots Remaining",value:e.shotsRemaining,warning:e.shotsRemaining<=3},null,8,["value","warning"]),h(j,{label:"Ships Remaining",value:e.shipsRemaining},null,8,["value"])]))}}),_e=c(he,[["__scopeId","data-v-04ec1078"]]),fe=m({__name:"GridCell",props:{status:{},disabled:{type:Boolean}},emits:["click"],setup(a,{emit:e}){const s=a,n=e,t=F(()=>s.status?`grid-cell--${s.status}`:""),o=()=>{s.disabled||n("click")};return(l,r)=>(i(),u("div",{class:N(["grid-cell",[t.value,{"grid-cell--disabled":s.disabled}]]),onClick:o},[V(l.$slots,"default",{},void 0,!0)],2))}}),ge=c(fe,[["__scopeId","data-v-6f614799"]]),ve={class:"game-board"},be={class:"game-board__header"},$e={class:"game-board__row-label"},ye={class:"game-board__row-cells"},we=m({__name:"GameBoard",props:{grid:{},disabled:{type:Boolean}},emits:["fire"],setup(a){const e=f.data.cellEmoji,s=t=>t.sunk?"sunk":t.hit?"hit":t.miss?"miss":"",n=t=>t.sunk?e.sunk:t.hit?e.hit:t.miss?e.miss:"";return(t,o)=>(i(),u("div",ve,[b("div",be,[o[0]||(o[0]=b("div",{class:"game-board__corner"},null,-1)),(i(!0),u(B,null,G(t.grid[0].length,(l,r)=>(i(),u("div",{key:r,class:"game-board__header-cell"},k(String.fromCharCode(65+r)),1))),128))]),(i(!0),u(B,null,G(t.grid,(l,r)=>(i(),u("div",{class:"game-board__row",key:r},[b("div",$e,k(r+1),1),b("div",ye,[(i(!0),u(B,null,G(l,(_,$)=>(i(),R(ge,{key:$,status:s(_),disabled:t.disabled,onClick:C=>t.$emit("fire",{row:r,col:$})},{default:A(()=>[S(k(n(_)),1)]),_:2},1032,["status","disabled","onClick"]))),128))])]))),128))]))}}),ke=c(we,[["__scopeId","data-v-d9d5184d"]]),Se=["placeholder","value"],Ce=m({__name:"InputCoordinate",props:{modelValue:{},placeholder:{}},emits:["update:modelValue","submit"],setup(a,{emit:e}){const s=e,n=o=>{let r=o.target.value.toUpperCase();r=r.replace(/[^A-J0-9]/g,"").substring(0,3),s("update:modelValue",r)},t=()=>{s("submit")};return(o,l)=>(i(),u("input",{class:"input-coordinate",type:"text",placeholder:o.placeholder,value:o.modelValue,maxlength:"3",onInput:n,onKeyup:Q(t,["enter"])},null,40,Se))}}),Ie=c(Ce,[["__scopeId","data-v-4e1464c2"]]),Ve=m({__name:"ButtonFire",emits:["click"],setup(a){return(e,s)=>(i(),u("button",{class:"btn-fire",type:"button",onClick:s[0]||(s[0]=n=>e.$emit("click"))},[V(e.$slots,"default",{},()=>[s[1]||(s[1]=S(" 🚀 Fire!",-1))],!0)]))}}),Be=c(Ve,[["__scopeId","data-v-5214331b"]]),L=w(!1);function O(){const a={hit:new Audio("/sounds/explosion.wav"),sunk:new Audio("/sounds/ship-down.wav")};function e(n){if(L.value)return;const t=a[n];t&&(t.currentTime=0,t.play())}function s(){L.value=!L.value}return{play:e,toggleMute:s}}const Ge=m({__name:"ButtonMute",emits:["click"],setup(a){const e=w(!1),s=()=>{e.value=!e.value,O().toggleMute()},n=()=>e.value?"🔇 Unmute":"🔊 Mute";return(t,o)=>(i(),u("button",{class:"btn-mute",type:"button",onClick:s},[V(t.$slots,"default",{},()=>[S(k(n()),1)],!0)]))}}),Fe=c(Ge,[["__scopeId","data-v-003e65f7"]]),Re={class:"input-section"},Me={class:"input-group"},Ee=m({__name:"InputSection",props:{modelValue:{},disabled:{type:Boolean},placeholder:{}},emits:["update:modelValue","submit"],setup(a,{emit:e}){const s=a,n=e,t=F({get:()=>s.modelValue,set:l=>n("update:modelValue",l)}),o=()=>{!s.disabled&&t.value&&n("submit")};return(l,r)=>(i(),u("div",Re,[b("div",Me,[h(Ie,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=_=>t.value=_),placeholder:l.placeholder,onSubmit:o},null,8,["modelValue","placeholder"]),h(Be,{disabled:l.disabled,onClick:o},null,8,["disabled"]),h(Fe)])]))}}),He=c(Ee,[["__scopeId","data-v-2d6dcba6"]]),je=m({__name:"HealthDot",props:{filled:{type:Boolean}},setup(a){return(e,s)=>(i(),u("span",{class:N(["health-dot",{filled:e.filled}])},null,2))}}),Ae=c(je,[["__scopeId","data-v-ebfccb39"]]),Ne={class:"ship-health"},ze=m({__name:"ShipHealth",props:{health:{},maxHealth:{}},setup(a){return(e,s)=>(i(),u("div",Ne,[(i(!0),u(B,null,G(e.maxHealth,n=>(i(),R(Ae,{key:n,filled:n<=e.health},null,8,["filled"]))),128))]))}}),De=c(ze,[["__scopeId","data-v-42397239"]]),Ue={class:"fleet-status"},Le={class:"fleet-status__ship-name"},Te=m({__name:"ShipsStatus",props:{ships:{}},setup(a){return(e,s)=>(i(),u("section",Ue,[s[0]||(s[0]=b("h3",{class:"fleet-status__title"},[S(" Fleet Status "),b("span",{class:"led"})],-1)),(i(!0),u(B,null,G(e.ships,n=>(i(),u("div",{class:"fleet-status__ship",key:n.name},[b("span",Le,k(n.name)+" ("+k(n.size)+" squares) ",1),h(De,{class:"fleet-status__ship-health",health:n.hits,maxHealth:n.size},null,8,["health","maxHealth"])]))),128))]))}}),Ye=c(Te,[["__scopeId","data-v-61bcf635"]]),Ke=m({__name:"ButtonNew",emits:["click"],setup(a){return(e,s)=>(i(),u("button",{class:"btn-new",type:"button",onClick:s[0]||(s[0]=n=>e.$emit("click"))},[V(e.$slots,"default",{},()=>[s[1]||(s[1]=S("New Game",-1))],!0)]))}}),qe=c(Ke,[["__scopeId","data-v-4097bdac"]]),Je=m({__name:"GameMessage",props:{text:{},type:{}},setup(a){return(e,s)=>e.text?(i(),u("p",{key:0,class:N(["game-message",`game-message--${e.type}`])},k(e.text),3)):T("",!0)}}),Pe=c(Je,[["__scopeId","data-v-e7099978"]]),We={class:"game-layout"},Ze={class:"game-layout__title"},Oe={class:"game-layout__grid-container"},Qe={class:"game-layout__message-container"},Xe=m({__name:"GameLayout",props:{info:{},grid:{},input:{},message:{},ships:{},gameStatus:{}},emits:["fire","submit","new-game"],setup(a){const e=a,s=F(()=>!te(n.value,e.grid)||e.gameStatus!=="in-progress"),n=w("");return(t,o)=>(i(),u("div",We,[b("h1",Ze,[V(t.$slots,"title",{},()=>[o[4]||(o[4]=S("Battleships",-1))],!0)]),h(_e,{"shots-fired":t.info.shotsFired,hits:t.info.hits,"shots-remaining":t.info.shotsRemaining,"ships-remaining":t.info.shipsRemaining},null,8,["shots-fired","hits","shots-remaining","ships-remaining"]),b("div",Oe,[h(ke,{grid:t.grid,disabled:t.gameStatus!=="in-progress",onFire:o[0]||(o[0]=l=>t.$emit("fire",l))},null,8,["grid","disabled"])]),h(He,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=l=>n.value=l),placeholder:t.input.placeholder,disabled:s.value,onSubmit:o[2]||(o[2]=l=>t.$emit("submit",n.value))},null,8,["modelValue","placeholder","disabled"]),b("div",Qe,[t.message?(i(),R(Pe,{key:0,text:t.message.text,type:t.message.type},null,8,["text","type"])):T("",!0),t.gameStatus==="win"||t.gameStatus==="lose"?(i(),R(qe,{key:1,onClick:o[3]||(o[3]=l=>t.$emit("new-game"))})):T("",!0)]),h(Ye,{ships:t.ships},null,8,["ships"])]))}}),xe=c(Xe,[["__scopeId","data-v-4d06fef1"]]);function es(){const a=[],e=w([]),s=w(0),n=w(0),t=w(""),o=w(""),l=O(),r=w("in-progress"),_=F(()=>f.data.maxShots-s.value),$=F(()=>e.value.filter(d=>d.hits<d.size).length),C=()=>{a.length=0;for(let d=0;d<f.data.grid.rows;d++){const p=[];for(let g=0;g<f.data.grid.cols;g++)p.push(X({ship:null,hit:!1,sunk:!1,miss:!1}));a.push(p)}},I=()=>{e.value=f.data.ships.map(d=>({...d,hits:0,positions:[]})),e.value.forEach((d,p)=>{let g=!1,y=0;for(;!g&&y<100;){y++;const z=Math.random()<.5,D=Math.floor(Math.random()*f.data.grid.rows),U=Math.floor(Math.random()*f.data.grid.cols);if(ee(D,U,d.size,z,a)){for(let H=0;H<d.size;H++){const K=z?D:D+H,q=z?U+H:U;a[K][q].ship=p,d.positions.push({row:K,col:q})}g=!0}}if(!g)throw new Error(`Failed to place ship: ${d.name} after ${y} attempts. Is the grid too small?`)})},M=d=>{const p=a[d.row][d.col];if(!(p.hit||p.miss||r.value!=="in-progress")){if(s.value++,p.ship!==null){p.hit=!0,n.value++;const g=e.value[p.ship];if(g.hits++,g.hits>=g.size){if(g.positions.forEach(y=>a[y.row][y.col].sunk=!0),l.play("sunk"),t.value=`${f.data.gameEmoji.hit} Direct Hit! You sunk the ${g.name}!`,o.value="sunk",e.value.every(y=>y.hits>=y.size)){t.value=`${f.data.gameEmoji.win} Victory! You destroyed all ships in ${s.value} shots!`,o.value="win",r.value="win";return}}else l.play("hit"),t.value=`${f.data.gameEmoji.hit} Direct Hit!`,o.value="hit"}else p.miss=!0,t.value=`${f.data.cellEmoji.miss} Miss!`,o.value="miss";_.value<=0&&(t.value=`${f.data.gameEmoji.lose} Defeat! You ran out of shots after ${s.value} attempts.`,o.value="lose",r.value="lose")}},Y=d=>{const p=Z(d);p&&M(p)},E=()=>{r.value="in-progress",s.value=0,n.value=0,t.value="",o.value="",C(),I()};return C(),I(),{grid:a,ships:e,shotsFired:s,hits:n,message:t,messageType:o,shipsRemaining:$,shotsRemaining:_,gameStatus:r,fireAt:M,fireAtCoordinate:Y,resetGame:E}}const ts=m({__name:"GameView",setup(a){const{grid:e,ships:s,shotsFired:n,hits:t,message:o,messageType:l,gameStatus:r,shipsRemaining:_,shotsRemaining:$,fireAt:C,fireAtCoordinate:I,resetGame:M}=es();return(Y,E)=>(i(),R(xe,{info:{shotsFired:v(n),hits:v(t),shipsRemaining:v(_),shotsRemaining:v($)},grid:v(e),input:{placeholder:"(e.g. B4)"},message:{type:v(l),text:v(o)},ships:v(s),"game-status":v(r),onFire:v(C),onSubmit:v(I),onNewGame:v(M)},{title:A(()=>[...E[0]||(E[0]=[S("🚢 Vue Battleships",-1)])]),_:1},8,["info","grid","message","ships","game-status","onFire","onSubmit","onNewGame"]))}});export{ts as default};
