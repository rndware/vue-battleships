import{_ as c,c as u,o as i,r as y,d as p,a as f,w as A,b as C,t as $,n as N,e as F,f as Q,g as S,F as V,h as G,i as R,j as X,k as w,l as T,s as x,u as v}from"./index-Bgw69w1j.js";const ee={maxShots:50,grid:{rows:10,cols:10},ships:[{name:"Battleship",size:5},{name:"Destroyer",size:4}],cellEmoji:{sunk:"ðŸ”¥",hit:"ðŸ’¥",miss:"ðŸ’¦"},gameEmoji:{win:"ðŸ† ",lose:"ðŸ’€",hit:"ðŸŽ¯ "}},_={data:ee},{rows:J,cols:P}=_.data.grid,W=(a,e)=>a>=0&&a<J&&e>=0&&e<P,Z=a=>{const e=a.toUpperCase().match(/^([A-Z])(\d{1,2})$/);if(!e)return null;const t=e[1].charCodeAt(0)-65,n=parseInt(e[2],10)-1;return W(n,t)?{row:n,col:t}:null},se=(a,e,t,n,s)=>{if(n&&e+t>P||!n&&a+t>J)return!1;for(let o=0;o<t;o++){const l=n?a:a+o,r=n?e+o:e;for(let m=-1;m<=1;m++)for(let b=-1;b<=1;b++){const I=l+m,B=r+b;if(W(I,B)&&s[I][B].ship!==null)return!1}}return!0},te=a=>!a.hit&&!a.miss&&!a.sunk,ae=(a,e)=>{const t=Z(a);return t?te(e[t.row][t.col]):!1},ne={},oe={class:"info-label"};function ie(a,e){return i(),u("span",oe,[y(a.$slots,"default",{},void 0,!0)])}const le=c(ne,[["render",ie],["__scopeId","data-v-f075c718"]]),re={},ue={class:"info-value"};function de(a,e){return i(),u("span",ue,[y(a.$slots,"default",{},void 0,!0)])}const ce=c(re,[["render",de],["__scopeId","data-v-cfb17ec2"]]),pe={class:"info-item"},me=p({__name:"InfoItem",props:{label:{},value:{},warning:{type:Boolean}},setup(a){return(e,t)=>(i(),u("div",pe,[f(le,null,{default:A(()=>[C($(e.label),1)]),_:1}),f(ce,{class:N({warning:e.warning})},{default:A(()=>[C($(e.value),1)]),_:1},8,["class"])]))}}),j=c(me,[["__scopeId","data-v-1d452693"]]),he={class:"game-info"},fe=p({__name:"GameInfo",props:{shotsFired:{},hits:{},shotsRemaining:{},shipsRemaining:{}},setup(a){return(e,t)=>(i(),u("section",he,[y(e.$slots,"default",{},()=>[f(j,{label:"Shots Fired",value:e.shotsFired},null,8,["value"]),f(j,{label:"Hits",value:e.hits},null,8,["value"]),f(j,{label:"Shots Remaining",value:e.shotsRemaining,warning:e.shotsRemaining<=3},null,8,["value","warning"]),f(j,{label:"Ships Remaining",value:e.shipsRemaining},null,8,["value"])],!0)]))}}),_e=c(fe,[["__scopeId","data-v-79cecf8b"]]),ge=p({__name:"GridCell",props:{status:{},disabled:{type:Boolean}},emits:["click"],setup(a,{emit:e}){const t=a,n=e,s=F(()=>`grid-cell--${t.status||"pristine"}`),o=()=>{t.disabled||n("click")};return(l,r)=>(i(),u("div",{class:N(["grid-cell",[s.value,{"grid-cell--disabled":t.disabled}]]),onClick:o},[y(l.$slots,"default",{},void 0,!0)],2))}}),ve=c(ge,[["__scopeId","data-v-619e406f"]]),be={class:"game-board__row-label"},$e=p({__name:"GameBoard",props:{grid:{},disabled:{type:Boolean}},emits:["fire"],setup(a){const e=_.data.cellEmoji,t=s=>s.sunk?"sunk":s.hit?"hit":s.miss?"miss":"",n=s=>s.sunk?e.sunk:s.hit?e.hit:s.miss?e.miss:"";return(s,o)=>(i(),u("div",{class:"game-board",style:Q({"--grid-cols":s.grid[0].length,"--grid-rows":s.grid.length})},[o[0]||(o[0]=S("div",{class:"game-board__corner"},null,-1)),(i(!0),u(V,null,G(s.grid[0].length,(l,r)=>(i(),u("div",{key:r,class:"game-board__header-cell"},$(String.fromCharCode(65+r)),1))),128)),(i(!0),u(V,null,G(s.grid,(l,r)=>(i(),u(V,{key:r},[S("div",be,$(r+1),1),(i(!0),u(V,null,G(l,(m,b)=>(i(),R(ve,{key:b,status:t(m),disabled:s.disabled,onClick:I=>s.$emit("fire",{row:r,col:b})},{default:A(()=>[y(s.$slots,"cellContent",{cell:m},()=>[C($(n(m)),1)],!0)]),_:2},1032,["status","disabled","onClick"]))),128))],64))),128))],4))}}),ye=c($e,[["__scopeId","data-v-e5dcdef4"]]),ke=["placeholder","value"],we=p({__name:"InputCoordinate",props:{modelValue:{},placeholder:{}},emits:["update:modelValue","submit"],setup(a,{emit:e}){const t=e,n=o=>{let r=o.target.value.toUpperCase();r=r.replace(/[^A-J0-9]/g,"").substring(0,3),t("update:modelValue",r)},s=()=>{t("submit")};return(o,l)=>(i(),u("input",{class:"input-coordinate",type:"text",placeholder:o.placeholder,value:o.modelValue,maxlength:"3",onInput:n,onKeyup:X(s,["enter"])},null,40,ke))}}),Se=c(we,[["__scopeId","data-v-4e1464c2"]]),Ce=["disabled"],Ie=p({__name:"ButtonFire",props:{disabled:{type:Boolean}},emits:["click"],setup(a){return(e,t)=>(i(),u("button",{class:"btn-fire",type:"button",onClick:t[0]||(t[0]=n=>e.$emit("click")),disabled:e.disabled},[y(e.$slots,"default",{},()=>[t[1]||(t[1]=C(" ðŸš€ Fire!",-1))],!0)],8,Ce))}}),Be=c(Ie,[["__scopeId","data-v-00f46281"]]),L=w(!1);function O(){const a={hit:new Audio("/vue-battleships/sounds/explosion.wav"),sunk:new Audio("/vue-battleships/sounds/ship-down.wav")};function e(n){if(L.value)return;const s=a[n];s&&(s.currentTime=0,s.play())}function t(){L.value=!L.value}return{play:e,toggleMute:t}}const Ve=p({__name:"ButtonMute",emits:["click"],setup(a){const e=w(!1),t=()=>{e.value=!e.value,O().toggleMute()},n=()=>e.value?"ðŸ”‡ Unmute":"ðŸ”Š Mute";return(s,o)=>(i(),u("button",{class:"btn-mute",type:"button",onClick:t},[y(s.$slots,"default",{},()=>[C($(n()),1)],!0)]))}}),Ge=c(Ve,[["__scopeId","data-v-b5f10a27"]]),Fe={class:"input-section"},Re={class:"input-group"},Me=p({__name:"InputSection",props:{modelValue:{},disabled:{type:Boolean},placeholder:{}},emits:["update:modelValue","submit"],setup(a,{emit:e}){const t=a,n=e,s=F({get:()=>t.modelValue,set:l=>n("update:modelValue",l)}),o=()=>{!t.disabled&&s.value&&n("submit")};return(l,r)=>(i(),u("div",Fe,[S("div",Re,[y(l.$slots,"default",{},()=>[f(Se,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=m=>s.value=m),placeholder:l.placeholder,onSubmit:o},null,8,["modelValue","placeholder"]),f(Be,{disabled:l.disabled,onClick:o},null,8,["disabled"]),f(Ge)],!0)])]))}}),Ee=c(Me,[["__scopeId","data-v-1f89bcb9"]]),He=p({__name:"HealthDot",props:{filled:{type:Boolean}},setup(a){return(e,t)=>(i(),u("span",{class:N(["health-dot",{filled:e.filled}])},null,2))}}),je=c(He,[["__scopeId","data-v-ebfccb39"]]),Ae={class:"ship-health"},Ne=p({__name:"ShipHealth",props:{health:{},maxHealth:{}},setup(a){return(e,t)=>(i(),u("div",Ae,[(i(!0),u(V,null,G(e.maxHealth,n=>(i(),R(je,{key:n,filled:n<=e.health},null,8,["filled"]))),128))]))}}),ze=c(Ne,[["__scopeId","data-v-42397239"]]),De={class:"fleet-status"},Ue={class:"fleet-status__title"},Le={class:"fleet-status__ship-name"},Te=p({__name:"ShipsStatus",props:{title:{},ships:{}},setup(a){return(e,t)=>(i(),u("section",De,[S("h3",Ue,[C($(e.title||"Fleet Status")+" ",1),t[0]||(t[0]=S("span",{class:"led"},null,-1))]),(i(!0),u(V,null,G(e.ships,n=>(i(),u("div",{class:"fleet-status__ship",key:n.name},[S("span",Le,$(n.name)+" ("+$(n.size)+" squares) ",1),f(ze,{class:"fleet-status__ship-health",health:n.hits,maxHealth:n.size},null,8,["health","maxHealth"])]))),128))]))}}),Ye=c(Te,[["__scopeId","data-v-77dd9eda"]]),Ke=p({__name:"ButtonNew",emits:["click"],setup(a){return(e,t)=>(i(),u("button",{class:"btn-new",type:"button",onClick:t[0]||(t[0]=n=>e.$emit("click"))},[y(e.$slots,"default",{},()=>[t[1]||(t[1]=C("New Game",-1))],!0)]))}}),qe=c(Ke,[["__scopeId","data-v-097f2768"]]),Je=p({__name:"GameMessage",props:{text:{},type:{}},setup(a){return(e,t)=>e.text?(i(),u("p",{key:0,class:N(["game-message",`game-message--${e.type}`])},$(e.text),3)):T("",!0)}}),Pe=c(Je,[["__scopeId","data-v-e7099978"]]),We={class:"game-layout"},Ze={class:"game-layout__title"},Oe={class:"game-layout__grid-container"},Qe={class:"game-layout__message-container"},Xe=p({__name:"GameLayout",props:{info:{},grid:{},input:{},message:{},ships:{},gameStatus:{}},emits:["fire","submit","new-game"],setup(a){const e=a,t=F(()=>!ae(n.value,e.grid)||e.gameStatus!=="in-progress"),n=w("");return(s,o)=>(i(),u("div",We,[S("h1",Ze,[y(s.$slots,"title",{},()=>[o[4]||(o[4]=C("Battleships",-1))],!0)]),f(_e,{"shots-fired":s.info.shotsFired,hits:s.info.hits,"shots-remaining":s.info.shotsRemaining,"ships-remaining":s.info.shipsRemaining},null,8,["shots-fired","hits","shots-remaining","ships-remaining"]),S("div",Oe,[f(ye,{grid:s.grid,disabled:s.gameStatus!=="in-progress",onFire:o[0]||(o[0]=l=>s.$emit("fire",l))},null,8,["grid","disabled"])]),f(Ee,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=l=>n.value=l),placeholder:s.input.placeholder,disabled:t.value,onSubmit:o[2]||(o[2]=l=>s.$emit("submit",n.value))},null,8,["modelValue","placeholder","disabled"]),S("div",Qe,[s.message?(i(),R(Pe,{key:0,text:s.message.text,type:s.message.type},null,8,["text","type"])):T("",!0),s.gameStatus==="win"||s.gameStatus==="lose"?(i(),R(qe,{key:1,onClick:o[3]||(o[3]=l=>s.$emit("new-game"))})):T("",!0)]),f(Ye,{ships:s.ships},null,8,["ships"])]))}}),xe=c(Xe,[["__scopeId","data-v-95bf02dc"]]);function es(){const a=[],e=w([]),t=w(0),n=w(0),s=w(""),o=w(""),l=O(),r=w("in-progress"),m=F(()=>_.data.maxShots-t.value),b=F(()=>e.value.filter(d=>d.hits<d.size).length),I=()=>{a.length=0;for(let d=0;d<_.data.grid.rows;d++){const h=[];for(let g=0;g<_.data.grid.cols;g++)h.push(x({ship:null,hit:!1,sunk:!1,miss:!1}));a.push(h)}},B=()=>{e.value=_.data.ships.map(d=>({...d,hits:0,positions:[]})),e.value.forEach((d,h)=>{let g=!1,k=0;for(;!g&&k<100;){k++;const z=Math.random()<.5,D=Math.floor(Math.random()*_.data.grid.rows),U=Math.floor(Math.random()*_.data.grid.cols);if(se(D,U,d.size,z,a)){for(let H=0;H<d.size;H++){const K=z?D:D+H,q=z?U+H:U;a[K][q].ship=h,d.positions.push({row:K,col:q})}g=!0}}if(!g)throw new Error(`Failed to place ship: ${d.name} after ${k} attempts. Is the grid too small?`)})},M=d=>{const h=a[d.row][d.col];if(!(h.hit||h.miss||r.value!=="in-progress")){if(t.value++,h.ship!==null){h.hit=!0,n.value++;const g=e.value[h.ship];if(g.hits++,g.hits>=g.size){if(g.positions.forEach(k=>a[k.row][k.col].sunk=!0),l.play("sunk"),s.value=`${_.data.gameEmoji.hit} Direct Hit! You sunk the ${g.name}!`,o.value="sunk",e.value.every(k=>k.hits>=k.size)){s.value=`${_.data.gameEmoji.win} Victory! You destroyed all ships in ${t.value} shots!`,o.value="win",r.value="win";return}}else l.play("hit"),s.value=`${_.data.gameEmoji.hit} Direct Hit!`,o.value="hit"}else h.miss=!0,s.value=`${_.data.cellEmoji.miss} Miss!`,o.value="miss";m.value<=0&&(s.value=`${_.data.gameEmoji.lose} Defeat! You ran out of shots after ${t.value} attempts.`,o.value="lose",r.value="lose")}},Y=d=>{const h=Z(d);h&&M(h)},E=()=>{r.value="in-progress",t.value=0,n.value=0,s.value="",o.value="",I(),B()};return I(),B(),{grid:a,ships:e,shotsFired:t,hits:n,message:s,messageType:o,shipsRemaining:b,shotsRemaining:m,gameStatus:r,fireAt:M,fireAtCoordinate:Y,resetGame:E}}const ts=p({__name:"GameView",setup(a){const{grid:e,ships:t,shotsFired:n,hits:s,message:o,messageType:l,gameStatus:r,shipsRemaining:m,shotsRemaining:b,fireAt:I,fireAtCoordinate:B,resetGame:M}=es();return(Y,E)=>(i(),R(xe,{info:{shotsFired:v(n),hits:v(s),shipsRemaining:v(m),shotsRemaining:v(b)},grid:v(e),input:{placeholder:"(e.g. B4)"},message:{type:v(l),text:v(o)},ships:v(t),"game-status":v(r),onFire:v(I),onSubmit:v(B),onNewGame:v(M)},{title:A(()=>[...E[0]||(E[0]=[C("ðŸš¢ Vue Battleships",-1)])]),_:1},8,["info","grid","message","ships","game-status","onFire","onSubmit","onNewGame"]))}});export{ts as default};
