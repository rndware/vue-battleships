import{_ as c,c as u,o as r,r as y,d as p,a as f,w as N,b as C,t as $,n as R,e as F,f as X,g as S,F as V,h as M,i as G,j as x,k,l as L,m as ee,s as se,u as v}from"./index-rilCCTmK.js";const te={maxShots:50,grid:{rows:10,cols:10},ships:[{name:"Battleship",size:5},{name:"Destroyer",size:4}],cellEmoji:{sunk:"🔥",hit:"💥",miss:"💦"},gameEmoji:{win:"🏆 ",lose:"💀",hit:"🎯 "}},_={data:te},{rows:P,cols:W}=_.data.grid,Z=(t,e)=>t>=0&&t<P&&e>=0&&e<W,O=t=>{const e=t.toUpperCase().match(/^([A-Z])(\d{1,2})$/);if(!e)return null;const s=e[1].charCodeAt(0)-65,o=parseInt(e[2],10)-1;return Z(o,s)?{row:o,col:s}:null},ae=(t,e,s,o,a)=>{if(o&&e+s>W||!o&&t+s>P)return!1;for(let n=0;n<s;n++){const i=o?t:t+n,l=o?e+n:e;for(let m=-1;m<=1;m++)for(let b=-1;b<=1;b++){const I=i+m,B=l+b;if(Z(I,B)&&a[I][B].ship!==null)return!1}}return!0},ne=t=>!t.hit&&!t.miss&&!t.sunk,oe=(t,e)=>{const s=O(t);return s?ne(e[s.row][s.col]):!1},ie={},le={class:"info-label"};function re(t,e){return r(),u("span",le,[y(t.$slots,"default",{},void 0,!0)])}const ue=c(ie,[["render",re],["__scopeId","data-v-0a69cedf"]]),de={},ce={class:"info-value"};function pe(t,e){return r(),u("span",ce,[y(t.$slots,"default",{},void 0,!0)])}const me=c(de,[["render",pe],["__scopeId","data-v-9f455b0f"]]),he={class:"info-item"},fe=p({__name:"InfoItem",props:{label:{},value:{},warning:{type:Boolean}},setup(t){return(e,s)=>(r(),u("div",he,[f(ue,null,{default:N(()=>[C($(e.label),1)]),_:1}),f(me,{class:R(["info-item__value",{"info-item__value--warning":e.warning}])},{default:N(()=>[C($(e.value),1)]),_:1},8,["class"])]))}}),A=c(fe,[["__scopeId","data-v-0fa82855"]]),_e={class:"game-info"},ge=p({__name:"GameInfo",props:{shotsFired:{},hits:{},shotsRemaining:{},shipsRemaining:{}},setup(t){return(e,s)=>(r(),u("section",_e,[y(e.$slots,"default",{},()=>[f(A,{label:"Shots Fired",value:e.shotsFired},null,8,["value"]),f(A,{label:"Hits",value:e.hits},null,8,["value"]),f(A,{label:"Shots Remaining",value:e.shotsRemaining,warning:e.shotsRemaining<=3},null,8,["value","warning"]),f(A,{label:"Ships Remaining",value:e.shipsRemaining},null,8,["value"])],!0)]))}}),ve=c(ge,[["__scopeId","data-v-ce213350"]]),be=p({__name:"GridCell",props:{status:{},disabled:{type:Boolean}},emits:["click"],setup(t,{emit:e}){const s=t,o=e,a=F(()=>`grid-cell--${s.status||"pristine"}`),n=()=>{s.disabled||o("click")};return(i,l)=>(r(),u("div",{class:R(["grid-cell",[a.value,{"grid-cell--disabled":s.disabled}]]),onClick:n},[y(i.$slots,"default",{},void 0,!0)],2))}}),$e=c(be,[["__scopeId","data-v-c2f33b04"]]),ye={class:"game-board__row-label"},we=p({__name:"GameBoard",props:{grid:{},disabled:{type:Boolean}},emits:["fire"],setup(t){const e=_.data.cellEmoji,s=a=>a.sunk?"sunk":a.hit?"hit":a.miss?"miss":"",o=a=>a.sunk?e.sunk:a.hit?e.hit:a.miss?e.miss:"";return(a,n)=>(r(),u("div",{class:"game-board",style:X({"--grid-cols":a.grid[0].length,"--grid-rows":a.grid.length})},[n[0]||(n[0]=S("div",{class:"game-board__corner"},null,-1)),(r(!0),u(V,null,M(a.grid[0].length,(i,l)=>(r(),u("div",{key:l,class:"game-board__header-cell"},$(String.fromCharCode(65+l)),1))),128)),(r(!0),u(V,null,M(a.grid,(i,l)=>(r(),u(V,{key:l},[S("div",ye,$(l+1),1),(r(!0),u(V,null,M(i,(m,b)=>(r(),G($e,{key:b,status:s(m),disabled:a.disabled,onClick:I=>a.$emit("fire",{row:l,col:b})},{default:N(()=>[y(a.$slots,"cellContent",{cell:m},()=>[C($(o(m)),1)],!0)]),_:2},1032,["status","disabled","onClick"]))),128))],64))),128))],4))}}),ke=c(we,[["__scopeId","data-v-c0bdde8f"]]),Se=["placeholder","value"],J=3,Ce=p({__name:"InputCoordinate",props:{modelValue:{},placeholder:{}},emits:["update:modelValue","submit"],setup(t,{emit:e}){const s=e,o=n=>{let l=n.target.value.toUpperCase();l=l.replace(/[^A-J0-9]/g,"").substring(0,J),s("update:modelValue",l)},a=()=>{s("submit")};return(n,i)=>(r(),u("input",{class:"input-coordinate",type:"text",placeholder:n.placeholder,value:n.modelValue,maxlength:J,onInput:o,onKeyup:x(a,["enter"])},null,40,Se))}}),Ie=c(Ce,[["__scopeId","data-v-c0a74543"]]),Be=["disabled"],Ve=p({__name:"ButtonFire",props:{disabled:{type:Boolean}},emits:["click"],setup(t){return(e,s)=>(r(),u("button",{class:"btn-fire",type:"button",onClick:s[0]||(s[0]=o=>e.$emit("click")),disabled:e.disabled},[y(e.$slots,"default",{},()=>[s[1]||(s[1]=C(" 🚀 Fire!",-1))],!0)],8,Be))}}),Fe=c(Ve,[["__scopeId","data-v-a5c6b9fc"]]),U=k(!1);function Q(){const t={hit:new Audio("/vue-battleships/sounds/explosion.wav"),sunk:new Audio("/vue-battleships/sounds/ship-down.wav")};function e(o){if(U.value)return;const a=t[o];a&&(a.currentTime=0,a.play())}function s(){U.value=!U.value}return{play:e,toggleMute:s}}const Me=p({__name:"ButtonMute",emits:["click"],setup(t){const e=k(!1),s=()=>{e.value=!e.value,Q().toggleMute()},o=()=>e.value?"🔇 Unmute":"🔊 Mute";return(a,n)=>(r(),u("button",{class:"btn-mute",type:"button",onClick:s},[y(a.$slots,"default",{},()=>[C($(o()),1)],!0)]))}}),Ge=c(Me,[["__scopeId","data-v-5f9d5389"]]),Re={class:"input-section"},Ee={class:"input-group"},He=p({__name:"InputSection",props:{modelValue:{},disabled:{type:Boolean},placeholder:{}},emits:["update:modelValue","submit"],setup(t,{emit:e}){const s=t,o=e,a=F({get:()=>s.modelValue,set:i=>o("update:modelValue",i)}),n=()=>{!s.disabled&&a.value&&o("submit")};return(i,l)=>(r(),u("div",Re,[S("div",Ee,[y(i.$slots,"default",{},()=>[f(Ie,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=m=>a.value=m),placeholder:i.placeholder,onSubmit:n},null,8,["modelValue","placeholder"]),f(Fe,{disabled:i.disabled,onClick:n},null,8,["disabled"]),f(Ge)],!0)])]))}}),je=c(He,[["__scopeId","data-v-7cf847ab"]]),Ae=p({__name:"HealthDot",props:{filled:{type:Boolean}},setup(t){return(e,s)=>(r(),u("span",{class:R(["health-dot",{"health-dot--filled":e.filled}])},null,2))}}),Ne=c(Ae,[["__scopeId","data-v-c18aa8e6"]]),ze={class:"ship-health"},De=p({__name:"ShipHealth",props:{health:{},maxHealth:{}},setup(t){return(e,s)=>(r(),u("div",ze,[(r(!0),u(V,null,M(e.maxHealth,o=>(r(),G(Ne,{key:o,filled:o<=e.health},null,8,["filled"]))),128))]))}}),Te=c(De,[["__scopeId","data-v-42397239"]]),Ue={class:"fleet-status"},Le={class:"fleet-status__title"},Ye={class:"fleet-status__ship-name"},Ke=p({__name:"FleetStatus",props:{title:{},ledMode:{},ships:{}},setup(t){return(e,s)=>(r(),u("section",Ue,[S("h3",Le,[C($(e.title||"Fleet Status")+" ",1),S("span",{class:R(["led",{"led--always-on":e.ledMode==="on"}])},null,2)]),(r(!0),u(V,null,M(e.ships,o=>(r(),u("div",{class:"fleet-status__ship",key:o.name},[S("span",Ye,$(o.name)+" ("+$(o.size)+" squares) ",1),f(Te,{class:"fleet-status__ship-health",health:o.hits,maxHealth:o.size},null,8,["health","maxHealth"])]))),128))]))}}),qe=c(Ke,[["__scopeId","data-v-e05ec861"]]),Je=p({__name:"ButtonNew",emits:["click"],setup(t){return(e,s)=>(r(),u("button",{class:"btn-new",type:"button",onClick:s[0]||(s[0]=o=>e.$emit("click"))},[y(e.$slots,"default",{},()=>[s[1]||(s[1]=C("New Game",-1))],!0)]))}}),Pe=c(Je,[["__scopeId","data-v-6ad1a3a5"]]),We=p({__name:"GameMessage",props:{text:{},type:{}},setup(t){return(e,s)=>e.text?(r(),u("p",{key:0,class:R(["game-message",`game-message--${e.type}`])},$(e.text),3)):L("",!0)}}),Ze=c(We,[["__scopeId","data-v-01d033b8"]]),Oe={class:"game-layout"},Qe={class:"game-layout__title"},Xe={class:"game-layout__grid-container"},xe={class:"game-layout__message-container"},es=p({__name:"GameLayout",props:{info:{},grid:{},input:{},message:{},ships:{},gameStatus:{}},emits:["fire","submit","new-game"],setup(t){const e=t,s=F(()=>!oe(a.value,e.grid)||e.gameStatus!=="in-progress"),o=F(()=>e.gameStatus!=="in-progress"?"on":"blink");ee(()=>e.gameStatus,()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})});const a=k("");return(n,i)=>(r(),u("div",Oe,[S("h1",Qe,[y(n.$slots,"title",{},()=>[i[4]||(i[4]=C("Battleships",-1))],!0)]),f(ve,{"shots-fired":n.info.shotsFired,hits:n.info.hits,"shots-remaining":n.info.shotsRemaining,"ships-remaining":n.info.shipsRemaining},null,8,["shots-fired","hits","shots-remaining","ships-remaining"]),S("div",Xe,[f(ke,{grid:n.grid,disabled:n.gameStatus!=="in-progress",onFire:i[0]||(i[0]=l=>n.$emit("fire",l))},null,8,["grid","disabled"])]),f(je,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=l=>a.value=l),placeholder:n.input.placeholder,disabled:s.value,onSubmit:i[2]||(i[2]=l=>n.$emit("submit",a.value))},null,8,["modelValue","placeholder","disabled"]),S("div",xe,[n.message?(r(),G(Ze,{key:0,text:n.message.text,type:n.message.type},null,8,["text","type"])):L("",!0),e.gameStatus!=="in-progress"?(r(),G(Pe,{key:1,onClick:i[3]||(i[3]=l=>n.$emit("new-game"))})):L("",!0)]),f(qe,{ships:n.ships,ledMode:o.value},null,8,["ships","ledMode"])]))}}),ss=c(es,[["__scopeId","data-v-7e36991d"]]);function ts(){const t=[],e=k([]),s=k(0),o=k(0),a=k(""),n=k(""),i=Q(),l=k("in-progress"),m=F(()=>_.data.maxShots-s.value),b=F(()=>e.value.filter(d=>d.hits<d.size).length),I=()=>{t.length=0;for(let d=0;d<_.data.grid.rows;d++){const h=[];for(let g=0;g<_.data.grid.cols;g++)h.push(se({ship:null,hit:!1,sunk:!1,miss:!1}));t.push(h)}},B=()=>{e.value=_.data.ships.map(d=>({...d,hits:0,positions:[]})),e.value.forEach((d,h)=>{let g=!1,w=0;for(;!g&&w<100;){w++;const z=Math.random()<.5,D=Math.floor(Math.random()*_.data.grid.rows),T=Math.floor(Math.random()*_.data.grid.cols);if(ae(D,T,d.size,z,t)){for(let j=0;j<d.size;j++){const K=z?D:D+j,q=z?T+j:T;t[K][q].ship=h,d.positions.push({row:K,col:q})}g=!0}}if(!g)throw new Error(`Failed to place ship: ${d.name} after ${w} attempts. Is the grid too small?`)})},E=d=>{const h=t[d.row][d.col];if(!(h.hit||h.miss||l.value!=="in-progress")){if(s.value++,h.ship!==null){h.hit=!0,o.value++;const g=e.value[h.ship];if(g.hits++,g.hits>=g.size){if(g.positions.forEach(w=>t[w.row][w.col].sunk=!0),i.play("sunk"),a.value=`${_.data.gameEmoji.hit} Direct Hit! You sunk the ${g.name}!`,n.value="sunk",e.value.every(w=>w.hits>=w.size)){a.value=`${_.data.gameEmoji.win} Victory! You destroyed all ships in ${s.value} shots!`,n.value="win",l.value="win";return}}else i.play("hit"),a.value=`${_.data.gameEmoji.hit} Direct Hit!`,n.value="hit"}else h.miss=!0,a.value=`${_.data.cellEmoji.miss} Miss!`,n.value="miss";m.value<=0&&(a.value=`${_.data.gameEmoji.lose} Defeat! You ran out of shots after ${s.value} attempts.`,n.value="lose",l.value="lose")}},Y=d=>{const h=O(d);h&&E(h)},H=()=>{l.value="in-progress",s.value=0,o.value=0,a.value="",n.value="",I(),B()};return I(),B(),{grid:t,ships:e,shotsFired:s,hits:o,message:a,messageType:n,shipsRemaining:b,shotsRemaining:m,gameStatus:l,fireAt:E,fireAtCoordinate:Y,resetGame:H}}const ns=p({__name:"GameView",setup(t){const{grid:e,ships:s,shotsFired:o,hits:a,message:n,messageType:i,gameStatus:l,shipsRemaining:m,shotsRemaining:b,fireAt:I,fireAtCoordinate:B,resetGame:E}=ts();return(Y,H)=>(r(),G(ss,{info:{shotsFired:v(o),hits:v(a),shipsRemaining:v(m),shotsRemaining:v(b)},grid:v(e),input:{placeholder:"(e.g. B4)"},message:{type:v(i),text:v(n)},ships:v(s),"game-status":v(l),onFire:v(I),onSubmit:v(B),onNewGame:v(E)},{title:N(()=>[...H[0]||(H[0]=[C("🚢 Vue Battleships",-1)])]),_:1},8,["info","grid","message","ships","game-status","onFire","onSubmit","onNewGame"]))}});export{ns as default};
